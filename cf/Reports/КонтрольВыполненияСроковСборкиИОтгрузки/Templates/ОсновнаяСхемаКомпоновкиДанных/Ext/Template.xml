<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Регион</dataPath>
			<field>Регион</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Регион</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Задача</dataPath>
			<field>Задача</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Задача</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаНачалаСтарта</dataPath>
			<field>ДатаНачалаСтарта</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата начала старта</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаОкончания</dataPath>
			<field>ДатаОкончания</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата окончания</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Контрагент</dataPath>
			<field>Контрагент</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Менеджер</dataPath>
			<field>Менеджер</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Менеджер</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Заказ</dataPath>
			<field>Заказ</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подразделение</dataPath>
			<field>Подразделение</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Подразделение</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Отдел</dataPath>
			<field>Отдел</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Отдел</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТипОтдела</dataPath>
			<field>ТипОтдела</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Тип отдела</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВариантДоставки</dataPath>
			<field>ВариантДоставки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вариант доставки</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДнейВСборкеОтгрузке</dataPath>
			<field>ДнейВСборкеОтгрузке</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дней в сборке отгрузке</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РегламентноеДнейСборкиОтгрузки</dataPath>
			<field>РегламентноеДнейСборкиОтгрузки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Регламентное дней сборки отгрузки</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаПервойСборкиОтгрузки</dataPath>
			<field>ДатаПервойСборкиОтгрузки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата первой сборки отгрузки</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДнейОтМоментаПервойСборкиОтгрузки</dataPath>
			<field>ДнейОтМоментаПервойСборкиОтгрузки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дней от момента первой сборки отгрузки</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	ЗадачаПользователю.Ссылка КАК Задача,
	ВЫБОР
		КОГДА ЗадачаПользователю.ТочкаМаршрута = ЗНАЧЕНИЕ(БизнесПроцесс.ПеремещениеТоваров.ТочкаМаршрута.ОтправитьТовар)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.СборкаОтгрузка.Сборка)
		КОГДА ЗадачаПользователю.ТочкаМаршрута = ЗНАЧЕНИЕ(БизнесПроцесс.СборкаТовара.ТочкаМаршрута.СобратьТовар)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.СборкаОтгрузка.Отгрузка)
	КОНЕЦ КАК СборкаОтгрузка,
	ЗадачаПользователю.Заказ,
	ЗадачаПользователю.Заказ.Контрагент КАК Контрагент,
	ЗадачаПользователю.Дата КАК ДатаНачалаСтарта,
	ЗадачаПользователю.ДатаВыполнения КАК ДатаОкончания,
	ЗадачаПользователю.Выполнена,
	ВЫБОР
		КОГДА НЕ ЗадачаПользователю.Заказ.МенеджерЗаказа ЕСТЬ NULL
				И НЕ ЗадачаПользователю.Заказ.МенеджерЗаказа = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
			ТОГДА ЗадачаПользователю.Заказ.МенеджерЗаказа
		КОГДА НЕ ЗадачаПользователю.Заказ.Оператор ЕСТЬ NULL
				И НЕ ЗадачаПользователю.Заказ.Оператор = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
			ТОГДА ЗадачаПользователю.Заказ.Оператор
		ИНАЧЕ ЗадачаПользователю.Заказ.Контрагент.ОсновнойМенеджер
	КОНЕЦ КАК Менеджер,
	ВЫБОР
		КОГДА НЕ ЗадачаПользователю.Заказ.МенеджерЗаказа ЕСТЬ NULL
				И НЕ ЗадачаПользователю.Заказ.МенеджерЗаказа = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
			ТОГДА ЗадачаПользователю.Заказ.МенеджерЗаказа.Отдел.ТипОтдела
		КОГДА НЕ ЗадачаПользователю.Заказ.Оператор ЕСТЬ NULL
				И НЕ ЗадачаПользователю.Заказ.Оператор = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
			ТОГДА ЗадачаПользователю.Заказ.Оператор.Отдел.ТипОтдела
		ИНАЧЕ ЗадачаПользователю.Заказ.Контрагент.ОсновнойМенеджер.Отдел.ТипОтдела
	КОНЕЦ КАК ТипОтдела,
	ВЫБОР
		КОГДА НЕ ЗадачаПользователю.Заказ.МенеджерЗаказа ЕСТЬ NULL
				И НЕ ЗадачаПользователю.Заказ.МенеджерЗаказа = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
			ТОГДА ЗадачаПользователю.Заказ.МенеджерЗаказа.Отдел
		КОГДА НЕ ЗадачаПользователю.Заказ.Оператор ЕСТЬ NULL
				И НЕ ЗадачаПользователю.Заказ.Оператор = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
			ТОГДА ЗадачаПользователю.Заказ.Оператор.Отдел
		ИНАЧЕ ЗадачаПользователю.Заказ.Контрагент.ОсновнойМенеджер.Отдел
	КОНЕЦ КАК Отдел,
	ВЫБОР
		КОГДА ЗадачаПользователю.Заказ ССЫЛКА Документ.ИнтернетЗаказПокупателя
			ТОГДА ВЫБОР
					КОГДА НЕ ЗадачаПользователю.Заказ.Оператор ЕСТЬ NULL
							И НЕ ЗадачаПользователю.Заказ.Оператор = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
						ТОГДА ЗадачаПользователю.Заказ.Оператор.Подразделение
					КОГДА НЕ ЗадачаПользователю.Заказ.МенеджерЗаказа ЕСТЬ NULL
							И НЕ ЗадачаПользователю.Заказ.МенеджерЗаказа = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
						ТОГДА ЗадачаПользователю.Заказ.МенеджерЗаказа.Подразделение
					ИНАЧЕ ЗадачаПользователю.Заказ.Контрагент.ОсновнойМенеджер.Подразделение
				КОНЕЦ
		ИНАЧЕ ВЫБОР
				КОГДА НЕ ЗадачаПользователю.Заказ.МенеджерЗаказа ЕСТЬ NULL
						И НЕ ЗадачаПользователю.Заказ.МенеджерЗаказа = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
					ТОГДА ЗадачаПользователю.Заказ.МенеджерЗаказа.Подразделение
				ИНАЧЕ ЗадачаПользователю.Заказ.Контрагент.ОсновнойМенеджер.Подразделение
			КОНЕЦ
	КОНЕЦ КАК Подразделение,
	ЗадачаПользователю.Заказ.СпособДоставки КАК СпособДоставки,
	ВЫБОР
		КОГДА ЗадачаПользователю.Заказ.Грузополучатель ССЫЛКА Справочник.Грузополучатели
				И ЗадачаПользователю.Заказ.Грузополучатель &lt;&gt; ЗНАЧЕНИЕ(Справочник.Грузополучатели.ПустаяСсылка)
			ТОГДА ЗадачаПользователю.Заказ.Грузополучатель
		ИНАЧЕ ЗадачаПользователю.Заказ.Контрагент
	КОНЕЦ КАК Грузополучатель,
	ЗадачаПользователю.Заказ.ВариантДоставкиНов КАК ВариантДоставки
ПОМЕСТИТЬ втЗадачи
ИЗ
	Задача.ЗадачаПользователю КАК ЗадачаПользователю
ГДЕ
	ЗадачаПользователю.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	И (ЗадачаПользователю.ТочкаМаршрута = ЗНАЧЕНИЕ(БизнесПроцесс.ПеремещениеТоваров.ТочкаМаршрута.ОтправитьТовар)
				И 1 В (&amp;ТочкаМаршрута)
			ИЛИ ЗадачаПользователю.ТочкаМаршрута = ЗНАЧЕНИЕ(БизнесПроцесс.СборкаТовара.ТочкаМаршрута.СобратьТовар)
				И 2 В (&amp;ТочкаМаршрута))
{ГДЕ
	(ЗадачаПользователю.Склад В (&amp;Склад)),
	(ЗадачаПользователю.Выполнена = &amp;Выполнена)}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ЕСТЬNULL(МАКСИМУМ(ПриоритетОтделаДляСкладаПриоритетОтдела.Ранг), 0) КАК Ранг,
	ЕСТЬNULL(МАКСИМУМ(ПриоритетОтделаДляСкладаПриоритетОтдела.ДнейВСборке), 0) КАК ДнейВСборке,
	втЗадачи.Менеджер
ПОМЕСТИТЬ втПриоритетОтделаДляСклада
ИЗ
	втЗадачи КАК втЗадачи
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.ПриоритетОтделаДляСклада.ПриоритетОтдела КАК ПриоритетОтделаДляСкладаПриоритетОтдела
		ПО втЗадачи.ТипОтдела = ПриоритетОтделаДляСкладаПриоритетОтдела.Отдел

СГРУППИРОВАТЬ ПО
	втЗадачи.Менеджер
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ГрафикСборокИОтгрузокСрезПоследних.СборкаОтгрузка КАК СборкаОтгрузка,
	ГрафикСборокИОтгрузокСрезПоследних.Отдел КАК ТипОтдела,
	ГрафикСборокИОтгрузокСрезПоследних.Подразделение КАК Подразделение,
	ГрафикСборокИОтгрузокСрезПоследних.Город КАК Регион,
	ГрафикСборокИОтгрузокСрезПоследних.Доставка КАК Доставка,
	1 КАК ДеньНедели
ПОМЕСТИТЬ втДеньСборки
ИЗ
	РегистрСведений.ГрафикСборокИОтгрузок.СрезПоследних({(&amp;ТекущаяДата)}, ) КАК ГрафикСборокИОтгрузокСрезПоследних
ГДЕ
	ГрафикСборокИОтгрузокСрезПоследних.Понедельник

ОБЪЕДИНИТЬ

ВЫБРАТЬ
	ГрафикСборокИОтгрузокСрезПоследних.СборкаОтгрузка,
	ГрафикСборокИОтгрузокСрезПоследних.Отдел,
	ГрафикСборокИОтгрузокСрезПоследних.Подразделение,
	ГрафикСборокИОтгрузокСрезПоследних.Город,
	ГрафикСборокИОтгрузокСрезПоследних.Доставка,
	2
ИЗ
	РегистрСведений.ГрафикСборокИОтгрузок.СрезПоследних({(&amp;ТекущаяДата)}, ) КАК ГрафикСборокИОтгрузокСрезПоследних
ГДЕ
	ГрафикСборокИОтгрузокСрезПоследних.Вторник

ОБЪЕДИНИТЬ

ВЫБРАТЬ
	ГрафикСборокИОтгрузокСрезПоследних.СборкаОтгрузка,
	ГрафикСборокИОтгрузокСрезПоследних.Отдел,
	ГрафикСборокИОтгрузокСрезПоследних.Подразделение,
	ГрафикСборокИОтгрузокСрезПоследних.Город,
	ГрафикСборокИОтгрузокСрезПоследних.Доставка,
	3
ИЗ
	РегистрСведений.ГрафикСборокИОтгрузок.СрезПоследних({(&amp;ТекущаяДата)}, ) КАК ГрафикСборокИОтгрузокСрезПоследних
ГДЕ
	ГрафикСборокИОтгрузокСрезПоследних.Среда

ОБЪЕДИНИТЬ

ВЫБРАТЬ
	ГрафикСборокИОтгрузокСрезПоследних.СборкаОтгрузка,
	ГрафикСборокИОтгрузокСрезПоследних.Отдел,
	ГрафикСборокИОтгрузокСрезПоследних.Подразделение,
	ГрафикСборокИОтгрузокСрезПоследних.Город,
	ГрафикСборокИОтгрузокСрезПоследних.Доставка,
	4
ИЗ
	РегистрСведений.ГрафикСборокИОтгрузок.СрезПоследних({(&amp;ТекущаяДата)}, ) КАК ГрафикСборокИОтгрузокСрезПоследних
ГДЕ
	ГрафикСборокИОтгрузокСрезПоследних.Четверг

ОБЪЕДИНИТЬ

ВЫБРАТЬ
	ГрафикСборокИОтгрузокСрезПоследних.СборкаОтгрузка,
	ГрафикСборокИОтгрузокСрезПоследних.Отдел,
	ГрафикСборокИОтгрузокСрезПоследних.Подразделение,
	ГрафикСборокИОтгрузокСрезПоследних.Город,
	ГрафикСборокИОтгрузокСрезПоследних.Доставка,
	5
ИЗ
	РегистрСведений.ГрафикСборокИОтгрузок.СрезПоследних({(&amp;ТекущаяДата)}, ) КАК ГрафикСборокИОтгрузокСрезПоследних
ГДЕ
	ГрафикСборокИОтгрузокСрезПоследних.Пятница

ОБЪЕДИНИТЬ

ВЫБРАТЬ
	ГрафикСборокИОтгрузокСрезПоследних.СборкаОтгрузка,
	ГрафикСборокИОтгрузокСрезПоследних.Отдел,
	ГрафикСборокИОтгрузокСрезПоследних.Подразделение,
	ГрафикСборокИОтгрузокСрезПоследних.Город,
	ГрафикСборокИОтгрузокСрезПоследних.Доставка,
	6
ИЗ
	РегистрСведений.ГрафикСборокИОтгрузок.СрезПоследних({(&amp;ТекущаяДата)}, ) КАК ГрафикСборокИОтгрузокСрезПоследних
ГДЕ
	ГрафикСборокИОтгрузокСрезПоследних.Суббота

ОБЪЕДИНИТЬ

ВЫБРАТЬ
	ГрафикСборокИОтгрузокСрезПоследних.СборкаОтгрузка,
	ГрафикСборокИОтгрузокСрезПоследних.Отдел,
	ГрафикСборокИОтгрузокСрезПоследних.Подразделение,
	ГрафикСборокИОтгрузокСрезПоследних.Город,
	ГрафикСборокИОтгрузокСрезПоследних.Доставка,
	7
ИЗ
	РегистрСведений.ГрафикСборокИОтгрузок.СрезПоследних({(&amp;ТекущаяДата)}, ) КАК ГрафикСборокИОтгрузокСрезПоследних
ГДЕ
	ГрафикСборокИОтгрузокСрезПоследних.Воскресение
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втЗадачи.Грузополучатель,
	МАКСИМУМ(ВЫБОР
			КОГДА КонтактнаяИнформация.Значение ССЫЛКА Справочник.Регионы
				ТОГДА КонтактнаяИнформация.Значение
			ИНАЧЕ NULL
		КОНЕЦ) КАК Регион
ПОМЕСТИТЬ втРегион
ИЗ
	втЗадачи КАК втЗадачи
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ПО втЗадачи.Грузополучатель = КонтактнаяИнформация.Объект
			И (КонтактнаяИнформация.Поле = &amp;Поле)
			И (КонтактнаяИнформация.Вид.Родитель В (&amp;Родитель))
			И (КонтактнаяИнформация.Значение &lt;&gt; "")

СГРУППИРОВАТЬ ПО
	втЗадачи.Грузополучатель
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втЗадачи.Задача,
	втЗадачи.Заказ,
	втЗадачи.Контрагент,
	втЗадачи.ДатаНачалаСтарта,
	втЗадачи.ДатаОкончания,
	втЗадачи.Менеджер,
	ЕСТЬNULL(втРегион.Регион, &amp;ПустойРегион) КАК Регион,
	втЗадачи.Подразделение,
	втЗадачи.ТипОтдела,
	втЗадачи.Отдел,
	втЗадачи.ВариантДоставки,
	втЗадачи.СборкаОтгрузка
ПОМЕСТИТЬ втЗадачиРегион
ИЗ
	втЗадачи КАК втЗадачи
		ЛЕВОЕ СОЕДИНЕНИЕ втРегион КАК втРегион
		ПО втЗадачи.Грузополучатель = втРегион.Грузополучатель
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втЗадачиРегион.Задача,
	втЗадачиРегион.Заказ,
	втЗадачиРегион.Контрагент,
	втЗадачиРегион.ДатаНачалаСтарта,
	втЗадачиРегион.ДатаОкончания,
	втЗадачиРегион.Менеджер,
	втЗадачиРегион.Регион,
	втЗадачиРегион.Подразделение,
	втЗадачиРегион.ТипОтдела,
	втЗадачиРегион.Отдел,
	втЗадачиРегион.ВариантДоставки,
	ДОБАВИТЬКДАТЕ(втЗадачиРегион.ДатаНачалаСтарта, ДЕНЬ, МИНИМУМ(ВЫБОР
				КОГДА втДеньСборки.ДеньНедели &gt; ДЕНЬНЕДЕЛИ(втЗадачиРегион.ДатаНачалаСтарта)
					ТОГДА втДеньСборки.ДеньНедели - ДЕНЬНЕДЕЛИ(втЗадачиРегион.ДатаНачалаСтарта)
				ИНАЧЕ 7 - (ДЕНЬНЕДЕЛИ(втЗадачиРегион.ДатаНачалаСтарта) - втДеньСборки.ДеньНедели)
			КОНЕЦ)) КАК ДатаПервойСборкиОтгрузки,
	втЗадачиРегион.СборкаОтгрузка
ПОМЕСТИТЬ втПервыйДеньОтгрузки
ИЗ
	втЗадачиРегион КАК втЗадачиРегион
		ЛЕВОЕ СОЕДИНЕНИЕ втДеньСборки КАК втДеньСборки
		ПО втЗадачиРегион.СборкаОтгрузка = втДеньСборки.СборкаОтгрузка
			И втЗадачиРегион.ТипОтдела = втДеньСборки.ТипОтдела
			И втЗадачиРегион.Регион = втДеньСборки.Регион
			И (втЗадачиРегион.ТипОтдела.Наименование = "ОРСТП"
					И втЗадачиРегион.Регион.Код = "78"
				ИЛИ втЗадачиРегион.ТипОтдела.Наименование = "ОРСТП"
					И втЗадачиРегион.Регион.Код &lt;&gt; "78"
					И втЗадачиРегион.ВариантДоставки = втДеньСборки.Доставка
				ИЛИ втЗадачиРегион.ТипОтдела.Наименование &lt;&gt; "ОРСТП"
					И втЗадачиРегион.Подразделение = втДеньСборки.Подразделение)

СГРУППИРОВАТЬ ПО
	втЗадачиРегион.Задача,
	втЗадачиРегион.Заказ,
	втЗадачиРегион.Контрагент,
	втЗадачиРегион.ДатаНачалаСтарта,
	втЗадачиРегион.ДатаОкончания,
	втЗадачиРегион.Менеджер,
	втЗадачиРегион.Регион,
	втЗадачиРегион.Подразделение,
	втЗадачиРегион.ТипОтдела,
	втЗадачиРегион.Отдел,
	втЗадачиРегион.ВариантДоставки,
	втЗадачиРегион.СборкаОтгрузка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втПервыйДеньОтгрузки.Задача,
	втПервыйДеньОтгрузки.Заказ,
	втПервыйДеньОтгрузки.Контрагент,
	втПервыйДеньОтгрузки.ДатаНачалаСтарта,
	втПервыйДеньОтгрузки.ДатаПервойСборкиОтгрузки,
	втПервыйДеньОтгрузки.ДатаОкончания,
	ВЫБОР
		КОГДА втПервыйДеньОтгрузки.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА РАЗНОСТЬДАТ(втПервыйДеньОтгрузки.ДатаНачалаСтарта, &amp;ТекущаяДата, ДЕНЬ)
		ИНАЧЕ РАЗНОСТЬДАТ(втПервыйДеньОтгрузки.ДатаНачалаСтарта, втПервыйДеньОтгрузки.ДатаОкончания, ДЕНЬ)
	КОНЕЦ КАК ДнейВСборкеОтгрузке,
	ВЫБОР
		КОГДА втПервыйДеньОтгрузки.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА РАЗНОСТЬДАТ(втПервыйДеньОтгрузки.ДатаПервойСборкиОтгрузки, &amp;ТекущаяДата, ДЕНЬ)
		ИНАЧЕ РАЗНОСТЬДАТ(втПервыйДеньОтгрузки.ДатаПервойСборкиОтгрузки, втПервыйДеньОтгрузки.ДатаОкончания, ДЕНЬ)
	КОНЕЦ КАК ДнейОтМоментаПервойСборкиОтгрузки,
	ВЫБОР
		КОГДА втПервыйДеньОтгрузки.СборкаОтгрузка = ЗНАЧЕНИЕ(Перечисление.СборкаОтгрузка.Сборка)
			ТОГДА ЕСТЬNULL(втПриоритетОтделаДляСклада.ДнейВСборке, 0)
		ИНАЧЕ РАЗНОСТЬДАТ(втПервыйДеньОтгрузки.ДатаПервойСборкиОтгрузки, втПервыйДеньОтгрузки.ДатаНачалаСтарта, ДЕНЬ)
	КОНЕЦ КАК РегламентноеДнейСборкиОтгрузки,
	втПервыйДеньОтгрузки.Менеджер,
	втПервыйДеньОтгрузки.Регион,
	втПервыйДеньОтгрузки.Подразделение,
	втПервыйДеньОтгрузки.ТипОтдела,
	втПервыйДеньОтгрузки.Отдел,
	втПервыйДеньОтгрузки.ВариантДоставки
ИЗ
	втПервыйДеньОтгрузки КАК втПервыйДеньОтгрузки
		ЛЕВОЕ СОЕДИНЕНИЕ втПриоритетОтделаДляСклада КАК втПриоритетОтделаДляСклада
		ПО втПервыйДеньОтгрузки.Менеджер = втПриоритетОтделаДляСклада.Менеджер</query>
	</dataSet>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>v8:StandardPeriod</v8:Type>
		</valueType>
		<value xsi:type="v8:StandardPeriod">
			<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
			<v8:startDate>0001-01-01T00:00:00</v8:startDate>
			<v8:endDate>0001-01-01T00:00:00</v8:endDate>
		</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>ТочкаМаршрута</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Точка маршрута</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
		<useRestriction>false</useRestriction>
		<availableValue>
			<value xsi:type="xs:decimal">1</value>
			<presentation xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Собрать товар</v8:content>
				</v8:item>
			</presentation>
		</availableValue>
		<availableValue>
			<value xsi:type="xs:decimal">2</value>
			<presentation xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Отправить товар</v8:content>
				</v8:item>
			</presentation>
		</availableValue>
		<valueListAllowed>true</valueListAllowed>
	</parameter>
	<parameter>
		<name>Выполнена</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Выполнена</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">true</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Склад</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Склад</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Склады</v8:Type>
		</valueType>
		<useRestriction>false</useRestriction>
		<valueListAllowed>true</valueListAllowed>
	</parameter>
	<parameter>
		<name>ДатаНачала</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата начала</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;Период.ДатаНачала</expression>
	</parameter>
	<parameter>
		<name>ДатаОкончания</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата окончания</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;Период.ДатаОкончания</expression>
	</parameter>
	<parameter>
		<name>ТекущаяДата</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текущая дата</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>ТекущаяДата()</expression>
	</parameter>
	<parameter>
		<name>Поле</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Поле</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:ChartOfCharacteristicTypesRef.СоставКонтактнойИнформации</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">ПланВидовХарактеристик.СоставКонтактнойИнформации.Регион</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Родитель</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Родитель</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ВидыКонтактнойИнформации</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.ВидыКонтактнойИнформации.АдресФактический</value>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.ВидыКонтактнойИнформации.АдресЮридический</value>
		<useRestriction>true</useRestriction>
		<valueListAllowed>true</valueListAllowed>
	</parameter>
	<parameter>
		<name>ПустойРегион</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Пустой регион</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:TypeSet xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:Characteristic.СоставКонтактнойИнформации</v8:TypeSet>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.Регионы.ПустаяСсылка</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Задача</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Заказ</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Контрагент</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДатаНачалаСтарта</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДатаПервойСборкиОтгрузки</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДатаОкончания</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДнейВСборкеОтгрузке</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДнейОтМоментаПервойСборкиОтгрузки</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>РегламентноеДнейСборкиОтгрузки</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">Month</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>02781297-8497-4572-80d9-d807adccd96c</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ТочкаМаршрута</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">1</dcscor:value>
					<dcscor:value xsi:type="xs:decimal">2</dcscor:value>
					<dcsset:userSettingID>608fdb5a-3307-4eba-9a9a-376439e9017f</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Выполнена</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">false</dcscor:value>
					<dcsset:userSettingID>75420d0e-e17b-45e5-aaa8-1f13f7366327</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Склад</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>50bcec67-5578-4b68-a254-944f8e6e69ba</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ПустойРегион</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>