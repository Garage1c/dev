<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Склад</dataPath>
			<field>Склад</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СкладОстатков</dataPath>
			<field>СкладОстатков</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Склад остатков</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоДнейНаСкладе</dataPath>
			<field>КоличествоДнейНаСкладе</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество дней на складе</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СкладПродаж</dataPath>
			<field>СкладПродаж</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Склад продаж</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ОстаткиНаСкладах</dataPath>
			<field>ОстаткиНаСкладах</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Остатки на складах</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Бренд</dataPath>
			<field>Бренд</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Бренд</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Категория</dataPath>
			<field>Категория</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Категория</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Поставщик</dataPath>
			<field>Поставщик</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Поставщик</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Артикул</dataPath>
			<field>Артикул</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Артикул</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Упаковка</dataPath>
			<field>Упаковка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Акция</dataPath>
			<field>Акция</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Отдел</dataPath>
			<field>Отдел</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Контрагент</dataPath>
			<field>Контрагент</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Партнер</dataPath>
			<field>Партнер</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Менеджер</dataPath>
			<field>Менеджер</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Заказ</dataPath>
			<field>Заказ</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДокументПродажи</dataPath>
			<field>ДокументПродажи</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоОборот</dataPath>
			<field>КоличествоОборот</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подразделение</dataPath>
			<field>Подразделение</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Смена</dataPath>
			<field>Смена</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоэффициентСтраховогоЗапаса</dataPath>
			<field>КоэффициентСтраховогоЗапаса</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Коэффициент страхового запаса</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СредниеПродажиЗаДень</dataPath>
			<field>СредниеПродажиЗаДень</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Средние продажи за день</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СредниеПродажиЗаМесяц</dataPath>
			<field>СредниеПродажиЗаМесяц</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Средние продажи за месяц</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СтраховойЗапас</dataPath>
			<field>СтраховойЗапас</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Страховой запас</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ОстаткиВМесяцах</dataPath>
			<field>ОстаткиВМесяцах</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Остатки в месяцах</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДнейМеньшеСтраховогоЗапаса</dataPath>
			<field>ДнейМеньшеСтраховогоЗапаса</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дней меньше страхового запаса</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	0 КАК Цифры
ПОМЕСТИТЬ ВТ_Цифры

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	1

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	2

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	3

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	4

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	5

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	6

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	7

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	8

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	9
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -ВТ_Цифры.Цифры - 10 * ВТ_Цифры1.Цифры - 100 * ВТ_Цифры2.Цифры) КАК Поле1
ПОМЕСТИТЬ ВТ_Даты
ИЗ
	ВТ_Цифры КАК ВТ_Цифры
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Цифры КАК ВТ_Цифры1
		ПО (ИСТИНА)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Цифры КАК ВТ_Цифры2
		ПО (ИСТИНА)
ГДЕ
	ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -ВТ_Цифры.Цифры - 10 * ВТ_Цифры1.Цифры - 100 * ВТ_Цифры2.Цифры) МЕЖДУ ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -182) И &amp;КонецПериода
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -ВТ_Цифры.Цифры - 10 * ВТ_Цифры1.Цифры - 100 * ВТ_Цифры2.Цифры - 1000 * ВТ_Цифры3.Цифры) КАК Поле1
ПОМЕСТИТЬ ВТ_ДатыСтраховогоЗапараса
ИЗ
	ВТ_Цифры КАК ВТ_Цифры
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Цифры КАК ВТ_Цифры1
		ПО (ИСТИНА)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Цифры КАК ВТ_Цифры2
		ПО (ИСТИНА)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Цифры КАК ВТ_Цифры3
		ПО (ИСТИНА)
ГДЕ
	ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -ВТ_Цифры.Цифры - 10 * ВТ_Цифры1.Цифры - 100 * ВТ_Цифры2.Цифры - 1000 * ВТ_Цифры3.Цифры) МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТоварыНаСкладахОстаткиИОбороты.Период КАК Период,
	ТоварыНаСкладахОстаткиИОбороты.Номенклатура КАК Номенклатура,
	СУММА(ТоварыНаСкладахОстаткиИОбороты.КоличествоНачальныйОстаток) КАК КоличествоНачальныйОстаток
ПОМЕСТИТЬ ВТ_Остатки
ИЗ
	РегистрНакопления.ТоварыНаСкладах.ОстаткиИОбороты({(ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -183))}, {(&amp;КонецПериода)}, День, , ) КАК ТоварыНаСкладахОстаткиИОбороты
{ГДЕ
	ТоварыНаСкладахОстаткиИОбороты.Склад.* КАК СкладПродаж}

СГРУППИРОВАТЬ ПО
	ТоварыНаСкладахОстаткиИОбороты.Период,
	ТоварыНаСкладахОстаткиИОбороты.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТоварыНаСкладахОстаткиИОбороты.Период КАК Период,
	ТоварыНаСкладахОстаткиИОбороты.Номенклатура КАК Номенклатура,
	СУММА(ТоварыНаСкладахОстаткиИОбороты.КоличествоКонечныйОстаток) КАК КоличествоКонечныйОстаток
ПОМЕСТИТЬ ВТ_ОстаткиДляСТраховогоЗапаса
ИЗ
	РегистрНакопления.ТоварыНаСкладах.ОстаткиИОбороты({(&amp;НачалоПериода)}, {(&amp;КонецПериода)}, День, , ) КАК ТоварыНаСкладахОстаткиИОбороты
{ГДЕ
	ТоварыНаСкладахОстаткиИОбороты.Склад.* КАК СкладОстатков}

СГРУППИРОВАТЬ ПО
	ТоварыНаСкладахОстаткиИОбороты.Период,
	ТоварыНаСкладахОстаткиИОбороты.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Остатки.Период КАК Период,
	ВТ_Остатки.Номенклатура КАК Номенклатура,
	ВТ_Остатки.КоличествоНачальныйОстаток КАК КоличествоНачальныйОстаток,
	ВЫБОР
		КОГДА КОНЕЦПЕРИОДА(МИНИМУМ(ВТ_Остатки1.Период), ДЕНЬ) = &amp;КонецПериода
			ТОГДА &amp;КонецПериода
		ИНАЧЕ ДОБАВИТЬКДАТЕ(МИНИМУМ(ВТ_Остатки1.Период), СЕКУНДА, -1)
	КОНЕЦ КАК Период1
ПОМЕСТИТЬ ВТ_ОстаткиИнтервалы
ИЗ
	ВТ_Остатки КАК ВТ_Остатки
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Остатки КАК ВТ_Остатки1
		ПО ВТ_Остатки.Номенклатура = ВТ_Остатки1.Номенклатура
			И ВТ_Остатки.Период &lt; ВТ_Остатки1.Период

СГРУППИРОВАТЬ ПО
	ВТ_Остатки.Период,
	ВТ_Остатки.Номенклатура,
	ВТ_Остатки.КоличествоНачальныйОстаток
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ОстаткиДляСТраховогоЗапаса.Период КАК Период,
	ВТ_ОстаткиДляСТраховогоЗапаса.Номенклатура КАК Номенклатура,
	ВТ_ОстаткиДляСТраховогоЗапаса.КоличествоКонечныйОстаток КАК КоличествоКонечныйОстаток,
	ВЫБОР
		КОГДА КОНЕЦПЕРИОДА(МИНИМУМ(ВТ_ОстаткиДляСТраховогоЗапаса1.Период), ДЕНЬ) = &amp;КонецПериода
			ТОГДА &amp;КонецПериода
		ИНАЧЕ ДОБАВИТЬКДАТЕ(МИНИМУМ(ВТ_ОстаткиДляСТраховогоЗапаса1.Период), СЕКУНДА, -1)
	КОНЕЦ КАК Период1
ПОМЕСТИТЬ ВТ_ОстаткиИнтервалыКонечныйОстаток
ИЗ
	ВТ_ОстаткиДляСТраховогоЗапаса КАК ВТ_ОстаткиДляСТраховогоЗапаса
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_ОстаткиДляСТраховогоЗапаса КАК ВТ_ОстаткиДляСТраховогоЗапаса1
		ПО ВТ_ОстаткиДляСТраховогоЗапаса.Номенклатура = ВТ_ОстаткиДляСТраховогоЗапаса1.Номенклатура
			И ВТ_ОстаткиДляСТраховогоЗапаса.Период &lt; ВТ_ОстаткиДляСТраховогоЗапаса1.Период

СГРУППИРОВАТЬ ПО
	ВТ_ОстаткиДляСТраховогоЗапаса.Период,
	ВТ_ОстаткиДляСТраховогоЗапаса.Номенклатура,
	ВТ_ОстаткиДляСТраховогоЗапаса.КоличествоКонечныйОстаток
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ОстаткиИнтервалы.Номенклатура КАК Номенклатура,
	СУММА(ВЫБОР
			КОГДА ВТ_ОстаткиИнтервалы.КоличествоНачальныйОстаток &gt; 0
				ТОГДА 1
			ИНАЧЕ 0
		КОНЕЦ) КАК КоличествоДнейНаСкладе
ПОМЕСТИТЬ ВТ
ИЗ
	ВТ_ОстаткиИнтервалы КАК ВТ_ОстаткиИнтервалы
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Даты КАК ВТ_Даты
		ПО (ВТ_Даты.Поле1 МЕЖДУ ВТ_ОстаткиИнтервалы.Период И ВТ_ОстаткиИнтервалы.Период1)

СГРУППИРОВАТЬ ПО
	ВТ_ОстаткиИнтервалы.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ОстаткиИнтервалыКонечныйОстаток.Номенклатура КАК Номенклатура,
	СУММА(ВТ_ОстаткиИнтервалыКонечныйОстаток.КоличествоКонечныйОстаток) КАК КоличествоКонечныйОстаток,
	ВТ_ДатыСтраховогоЗапараса.Поле1 КАК Поле1
ПОМЕСТИТЬ ВТ_КонечныйОстаток
ИЗ
	ВТ_ОстаткиИнтервалыКонечныйОстаток КАК ВТ_ОстаткиИнтервалыКонечныйОстаток
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_ДатыСтраховогоЗапараса КАК ВТ_ДатыСтраховогоЗапараса
		ПО (ВТ_ДатыСтраховогоЗапараса.Поле1 МЕЖДУ ВТ_ОстаткиИнтервалыКонечныйОстаток.Период И ВТ_ОстаткиИнтервалыКонечныйОстаток.Период1)

СГРУППИРОВАТЬ ПО
	ВТ_ОстаткиИнтервалыКонечныйОстаток.Номенклатура,
	ВТ_ДатыСтраховогоЗапараса.Поле1
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТоварыНаСкладахОстатки.Номенклатура КАК Номенклатура,
	ТоварыНаСкладахОстатки.КоличествоОстаток КАК ОстаткиНаСкладах,
	ВТ.КоличествоДнейНаСкладе КАК КоличествоДнейНаСкладе,
	ТоварыНаСкладахОстатки.Номенклатура.Артикул КАК Артикул,
	ТоварыНаСкладахОстатки.Номенклатура.Производитель КАК Бренд,
	ТоварыНаСкладахОстатки.Номенклатура.КатегорияТовара КАК Категория,
	ТоварыНаСкладахОстатки.Номенклатура.Поставщик КАК Поставщик,
	ПродажиОбороты.КоличествоОборот КАК КоличествоОборот,
	&amp;КоэффициентСтраховогоЗапаса КАК КоэффициентСтраховогоЗапаса,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВТ.КоличествоДнейНаСкладе, 0) = 0
			ТОГДА 0
		ИНАЧЕ ПродажиОбороты.КоличествоОборот / ВТ.КоличествоДнейНаСкладе
	КОНЕЦ КАК СредниеПродажиЗаДень,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВТ.КоличествоДнейНаСкладе, 0) = 0
			ТОГДА 0
		ИНАЧЕ 30 * ПродажиОбороты.КоличествоОборот / ВТ.КоличествоДнейНаСкладе
	КОНЕЦ КАК СредниеПродажиЗаМесяц,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВТ.КоличествоДнейНаСкладе, 0) = 0
			ТОГДА 0
		ИНАЧЕ &amp;КоэффициентСтраховогоЗапаса * 30 * ПродажиОбороты.КоличествоОборот / ВТ.КоличествоДнейНаСкладе
	КОНЕЦ КАК СтраховойЗапас,
	ВЫБОР
		КОГДА ЕСТЬNULL(ПродажиОбороты.КоличествоОборот, 0) = 0
				ИЛИ ЕСТЬNULL(ВТ.КоличествоДнейНаСкладе, 0) = 0
			ТОГДА 0
		ИНАЧЕ ТоварыНаСкладахОстатки.КоличествоОстаток / (30 * (ПродажиОбороты.КоличествоОборот / ВТ.КоличествоДнейНаСкладе))
	КОНЕЦ КАК ОстаткиВМесяцах
ПОМЕСТИТЬ ВТ_ИтоговаяТаблица
ИЗ
	РегистрНакопления.ТоварыНаСкладах.Остатки({(&amp;КонецПериода)}, ) КАК ТоварыНаСкладахОстатки
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ КАК ВТ
		ПО ТоварыНаСкладахОстатки.Номенклатура = ВТ.Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.Продажи.Обороты({(ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -183))}, {(&amp;КонецПериода)}, , ) КАК ПродажиОбороты
		ПО ТоварыНаСкладахОстатки.Номенклатура = ПродажиОбороты.Номенклатура
{ГДЕ
	ТоварыНаСкладахОстатки.Склад.* КАК СкладОстатков,
	ПродажиОбороты.Склад.* КАК СкладПродаж}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ИтоговаяТаблица.Номенклатура КАК Номенклатура,
	ВТ_ИтоговаяТаблица.ОстаткиНаСкладах КАК ОстаткиНаСкладах,
	ВТ_ИтоговаяТаблица.КоличествоДнейНаСкладе КАК КоличествоДнейНаСкладе,
	ВТ_ИтоговаяТаблица.Артикул КАК Артикул,
	ВТ_ИтоговаяТаблица.Бренд КАК Бренд,
	ВТ_ИтоговаяТаблица.Категория КАК Категория,
	ВТ_ИтоговаяТаблица.Поставщик КАК Поставщик,
	ВТ_ИтоговаяТаблица.КоличествоОборот КАК КоличествоОборот,
	ВТ_ИтоговаяТаблица.КоэффициентСтраховогоЗапаса КАК КоэффициентСтраховогоЗапаса,
	ВТ_ИтоговаяТаблица.СредниеПродажиЗаДень КАК СредниеПродажиЗаДень,
	ВТ_ИтоговаяТаблица.СредниеПродажиЗаМесяц КАК СредниеПродажиЗаМесяц,
	ВТ_ИтоговаяТаблица.СтраховойЗапас КАК СтраховойЗапас,
	ВТ_ИтоговаяТаблица.ОстаткиВМесяцах КАК ОстаткиВМесяцах,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВЫБОР
			КОГДА ВТ_КонечныйОстаток.КоличествоКонечныйОстаток &lt; ВТ_ИтоговаяТаблица.СтраховойЗапас
				ТОГДА ВТ_КонечныйОстаток.Поле1
		КОНЕЦ) КАК ДнейМеньшеСтраховогоЗапаса
ИЗ
	ВТ_ИтоговаяТаблица КАК ВТ_ИтоговаяТаблица
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_КонечныйОстаток КАК ВТ_КонечныйОстаток
		ПО ВТ_ИтоговаяТаблица.Номенклатура = ВТ_КонечныйОстаток.Номенклатура

СГРУППИРОВАТЬ ПО
	ВТ_ИтоговаяТаблица.Номенклатура,
	ВТ_ИтоговаяТаблица.Артикул,
	ВТ_ИтоговаяТаблица.Бренд,
	ВТ_ИтоговаяТаблица.Категория,
	ВТ_ИтоговаяТаблица.КоэффициентСтраховогоЗапаса,
	ВТ_ИтоговаяТаблица.Поставщик,
	ВТ_ИтоговаяТаблица.ОстаткиНаСкладах,
	ВТ_ИтоговаяТаблица.КоличествоДнейНаСкладе,
	ВТ_ИтоговаяТаблица.КоличествоОборот,
	ВТ_ИтоговаяТаблица.СредниеПродажиЗаДень,
	ВТ_ИтоговаяТаблица.СредниеПродажиЗаМесяц,
	ВТ_ИтоговаяТаблица.СтраховойЗапас,
	ВТ_ИтоговаяТаблица.ОстаткиВМесяцах</query>
	</dataSet>
	<totalField>
		<dataPath>КоличествоДнейНаСкладе</dataPath>
		<expression>Сумма(КоличествоДнейНаСкладе)</expression>
	</totalField>
	<totalField>
		<dataPath>ОстаткиНаСкладах</dataPath>
		<expression>Сумма(ОстаткиНаСкладах)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоОборот</dataPath>
		<expression>Сумма(КоличествоОборот)</expression>
	</totalField>
	<totalField>
		<dataPath>СредниеПродажиЗаДень</dataPath>
		<expression>Сумма(СредниеПродажиЗаДень)</expression>
	</totalField>
	<totalField>
		<dataPath>СредниеПродажиЗаМесяц</dataPath>
		<expression>Сумма(СредниеПродажиЗаМесяц)</expression>
	</totalField>
	<totalField>
		<dataPath>ОстаткиВМесяцах</dataPath>
		<expression>Сумма(ОстаткиВМесяцах)</expression>
	</totalField>
	<totalField>
		<dataPath>СтраховойЗапас</dataPath>
		<expression>Сумма(СтраховойЗапас)</expression>
	</totalField>
	<totalField>
		<dataPath>ДнейМеньшеСтраховогоЗапаса</dataPath>
		<expression>Сумма(ДнейМеньшеСтраховогоЗапаса)</expression>
	</totalField>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>КоэффициентСтраховогоЗапаса</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Коэффициент страхового запаса</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
		<value xsi:type="xs:decimal">1</value>
		<useRestriction>false</useRestriction>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Артикул</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Номенклатура</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Бренд</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Категория</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ОстаткиНаСкладах</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КоличествоДнейНаСкладе</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КоличествоОборот</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СредниеПродажиЗаДень</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СредниеПродажиЗаМесяц</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ОстаткиВМесяцах</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СтраховойЗапас</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДнейМеньшеСтраховогоЗапаса</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Бренд</dcsset:left>
					<dcsset:comparisonType>InList</dcsset:comparisonType>
					<dcsset:right xsi:type="v8:ValueListType">
						<v8:valueType/>
						<v8:lastId xsi:type="xs:decimal">-1</v8:lastId>
					</dcsset:right>
					<dcsset:userSettingID>9d1ee3c9-a653-41fc-a913-8d7f2812d525</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Бренд</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Категория</dcsset:left>
					<dcsset:comparisonType>InList</dcsset:comparisonType>
					<dcsset:right xsi:type="v8:ValueListType">
						<v8:valueType/>
						<v8:lastId xsi:type="xs:decimal">-1</v8:lastId>
					</dcsset:right>
					<dcsset:userSettingID>6473c5ea-b244-4840-b5cc-e33daf08a6b5</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Категория</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Поставщик</dcsset:left>
					<dcsset:comparisonType>InList</dcsset:comparisonType>
					<dcsset:right xsi:type="v8:ValueListType">
						<v8:valueType/>
						<v8:lastId xsi:type="xs:decimal">-1</v8:lastId>
					</dcsset:right>
					<dcsset:userSettingID>cbecb9c9-a57b-4c2d-aae1-5e22da4432bb</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Поставщик</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура</dcsset:left>
					<dcsset:comparisonType>InList</dcsset:comparisonType>
					<dcsset:right xsi:type="v8:ValueListType">
						<v8:valueType/>
						<v8:lastId xsi:type="xs:decimal">-1</v8:lastId>
					</dcsset:right>
					<dcsset:userSettingID>07276ed6-67f5-4a88-8260-ea1a57d412f0</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Номенклатура</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">СкладПродаж</dcsset:left>
					<dcsset:comparisonType>InList</dcsset:comparisonType>
					<dcsset:right xsi:type="v8:ValueListType">
						<v8:valueType/>
						<v8:lastId xsi:type="xs:decimal">-1</v8:lastId>
					</dcsset:right>
					<dcsset:userSettingID>a98b3902-1051-4670-92b3-cee4601d7b34</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Склад продажи</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">СкладОстатков</dcsset:left>
					<dcsset:comparisonType>InList</dcsset:comparisonType>
					<dcsset:right xsi:type="v8:ValueListType">
						<v8:valueType/>
						<v8:lastId xsi:type="xs:decimal">-1</v8:lastId>
					</dcsset:right>
					<dcsset:userSettingID>2ed60e04-22d2-4d5a-9321-5a4898394f6e</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Склад отстатков</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>НачалоПериода</dcscor:parameter>
					<dcscor:value xsi:type="xs:dateTime">0001-01-01T00:00:00</dcscor:value>
					<dcsset:userSettingID>f96cb388-e01a-4af3-8bcc-89e88d9bc7eb</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>КонецПериода</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardBeginningDate">
						<v8:variant xsi:type="v8:StandardBeginningDateVariant">BeginningOfThisDay</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>682e6239-b6d1-471f-b846-4fd22eba046e</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>КоэффициентСтраховогоЗапаса</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">1</dcscor:value>
					<dcsset:userSettingID>51bef67f-e551-4f92-8609-79a831787028</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>